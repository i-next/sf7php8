/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/zrender@5.5.0/lib/animation/Animator.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var t={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,r=.1;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,r=.1;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,r=.1,n=.4;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=n*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(e){return 1-t.bounceOut(1-e)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5}};!function(t){var e={};if("undefined"==typeof JSON)return e;for(var r=0;r<t.length;r++){var n=String.fromCharCode(r+32),i=(t.charCodeAt(r)-20)/100;e[n]=i}}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),u(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],(function(t,e){return t["[object "+e+"]"]=!0,t}),{}),u(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],(function(t,e){return t["[object "+e+"Array]"]=!0,t}),{});var e=Array.prototype,r=e.slice,n=e.map,i=function(){}.constructor,o=i?i.prototype:null;function a(t){return!!t&&("string"!=typeof t&&"number"==typeof t.length)}function s(t,e,i){if(!t)return[];if(!e)return function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return r.apply(t,e)}(t);if(t.map&&t.map===n)return t.map(e,i);for(var o=[],a=0,s=t.length;a<s;a++)o.push(e.call(i,t[a],a,t));return o}function u(t,e,r,n){if(t&&e){for(var i=0,o=t.length;i<o;i++)r=e.call(n,r,t[i],i,t);return r}}function h(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}function f(t){return"function"==typeof t}function l(t){return"number"==typeof t}function c(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function p(){}o&&f(o.bind)&&o.call.bind(o.bind);var d=Math.pow,g=Math.sqrt,y=1e-8,v=g(3),_=1/3;function m(t){return t>-y&&t<y}var w=/cubic-bezier\(([0-9,\.e ]+)\)/;function b(t){var e=t&&w.exec(t);if(e){var r=e[1].split(","),n=+c(r[0]),i=+c(r[1]),o=+c(r[2]),a=+c(r[3]);if(isNaN(n+i+o+a))return;var s=[];return function(t){return t<=0?0:t>=1?1:function(t,e,r,n,i,o){var a=n+3*(e-r)-t,s=3*(r-2*e+t),u=3*(e-t),h=t-i,f=s*s-3*a*u,l=s*u-9*a*h,c=u*u-3*s*h,p=0;if(m(f)&&m(l))m(s)?o[0]=0:(I=-u/s)>=0&&I<=1&&(o[p++]=I);else{var y=l*l-4*f*c;if(m(y)){var w=l/f,b=-w/2;(I=-s/a+w)>=0&&I<=1&&(o[p++]=I),b>=0&&b<=1&&(o[p++]=b)}else if(y>0){var E=g(y),A=f*s+1.5*a*(-l+E),T=f*s+1.5*a*(-l-E);(I=(-s-((A=A<0?-d(-A,_):d(A,_))+(T=T<0?-d(-T,_):d(T,_))))/(3*a))>=0&&I<=1&&(o[p++]=I)}else{var k=(2*f*s-3*a*l)/(2*g(f*f*f)),R=Math.acos(k)/3,S=g(f),P=Math.cos(R),I=(-s-2*S*P)/(3*a),M=(b=(-s+S*(P+v*Math.sin(R)))/(3*a),(-s+S*(P-v*Math.sin(R)))/(3*a));I>=0&&I<=1&&(o[p++]=I),b>=0&&b<=1&&(o[p++]=b),M>=0&&M<=1&&(o[p++]=M)}}return p}(0,n,o,1,t,s)&&(r=1-(e=s[0]))*r*(r*0+3*e*i)+e*e*(e*1+3*r*a);var e,r}}}var E=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||p,this.ondestroy=t.ondestroy||p,this.onrestart=t.onrestart||p,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),!this._paused){var r=this._life,n=t-this._startTime-this._pausedTime,i=n/r;i<0&&(i=0),i=Math.min(i,1);var o=this.easingFunc,a=o?o(i):i;if(this.onframe(a),1===i){if(!this.loop)return!0;var s=n%r;this._startTime=t-s,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=e},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(e){this.easing=e,this.easingFunc=f(e)?e:t[e]||b(e)},e}(),A=function(t){this.value=t},T=function(){function t(){this._len=0}return t.prototype.insert=function(t){var e=new A(t);return this.insertEntry(e),e},t.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},t.prototype.remove=function(t){var e=t.prev,r=t.next;e?e.next=r:this.head=r,r?r.prev=e:this.tail=e,t.next=t.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),k=function(){function t(t){this._list=new T,this._maxSize=10,this._map={},this._maxSize=t}return t.prototype.put=function(t,e){var r=this._list,n=this._map,i=null;if(null==n[t]){var o=r.len(),a=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var s=r.head;r.remove(s),delete n[s.key],i=s.value,this._lastRemovedEntry=s}a?a.value=e:a=new A(e),a.key=t,r.insertEntry(a),n[t]=a}return i},t.prototype.get=function(t){var e=this._map[t],r=this._list;if(null!=e)return e!==r.tail&&(r.remove(e),r.insertEntry(e)),e.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),R={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function S(t){return(t=Math.round(t))<0?0:t>255?255:t}function P(t){return t<0?0:t>1?1:t}function I(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?S(parseFloat(e)/100*255):S(parseInt(e,10))}function M(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?P(parseFloat(e)/100):P(parseFloat(e))}function C(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}function x(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function O(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var U=new k(20),L=null;function F(t,e){L&&O(L,e),L=U.put(t,L||e.slice())}function B(t,e){if(t){e=e||[];var r=U.get(t);if(r)return O(e,r);var n=(t+="").replace(/ /g,"").toLowerCase();if(n in R)return O(e,R[n]),F(t,e),e;var i,o=n.length;if("#"===n.charAt(0))return 4===o||5===o?(i=parseInt(n.slice(1,4),16))>=0&&i<=4095?(x(e,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,5===o?parseInt(n.slice(4),16)/15:1),F(t,e),e):void x(e,0,0,0,1):7===o||9===o?(i=parseInt(n.slice(1,7),16))>=0&&i<=16777215?(x(e,(16711680&i)>>16,(65280&i)>>8,255&i,9===o?parseInt(n.slice(7),16)/255:1),F(t,e),e):void x(e,0,0,0,1):void 0;var a=n.indexOf("("),s=n.indexOf(")");if(-1!==a&&s+1===o){var u=n.substr(0,a),h=n.substr(a+1,s-(a+1)).split(","),f=1;switch(u){case"rgba":if(4!==h.length)return 3===h.length?x(e,+h[0],+h[1],+h[2],1):x(e,0,0,0,1);f=M(h.pop());case"rgb":return h.length>=3?(x(e,I(h[0]),I(h[1]),I(h[2]),3===h.length?f:M(h[3])),F(t,e),e):void x(e,0,0,0,1);case"hsla":return 4!==h.length?void x(e,0,0,0,1):(h[3]=M(h[3]),Y(h,e),F(t,e),e);case"hsl":return 3!==h.length?void x(e,0,0,0,1):(Y(h,e),F(t,e),e);default:return}}x(e,0,0,0,1)}}function Y(t,e){var r=(parseFloat(t[0])%360+360)%360/360,n=M(t[1]),i=M(t[2]),o=i<=.5?i*(n+1):i+n-i*n,a=2*i-o;return x(e=e||[],S(255*C(a,o,r+1/3)),S(255*C(a,o,r)),S(255*C(a,o,r-1/3)),1),4===t.length&&(e[3]=t[3]),e}new k(100);var N="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},D=[],q=[],V="undefined"!=typeof Uint8Array?Uint8Array:Array,K=!1;function W(){K=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)D[e]=t[e],q[t.charCodeAt(e)]=e;q["-".charCodeAt(0)]=62,q["_".charCodeAt(0)]=63}function j(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(D[(i=n)>>18&63]+D[i>>12&63]+D[i>>6&63]+D[63&i]);return o.join("")}function z(t){var e;K||W();for(var r=t.length,n=r%3,i="",o=[],a=16383,s=0,u=r-n;s<u;s+=a)o.push(j(t,s,s+a>u?u:s+a));return 1===n?(e=t[r-1],i+=D[e>>2],i+=D[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=D[e>>10],i+=D[e>>4&63],i+=D[e<<2&63],i+="="),o.push(i),o.join("")}function G(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,h=u>>1,f=-7,l=r?i-1:0,c=r?-1:1,p=t[e+l];for(l+=c,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+t[e+l],l+=c,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+t[e+l],l+=c,f-=8);if(0===o)o=1-h;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=h}return(p?-1:1)*a*Math.pow(2,o-n)}function Q(t,e,r,n,i,o){var a,s,u,h=8*o-i-1,f=(1<<h)-1,l=f>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?c/u:c*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,h+=i;h>0;t[r+p]=255&a,p+=d,a/=256,h-=8);t[r+p-d]|=128*g}var J={}.toString,Z=Array.isArray||function(t){return"[object Array]"==J.call(t)};function $(){return X.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function H(t,e){if($()<e)throw new RangeError("Invalid typed array length");return X.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=X.prototype:(null===t&&(t=new X(e)),t.length=e),t}function X(t,e,r){if(!(X.TYPED_ARRAY_SUPPORT||this instanceof X))return new X(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return rt(this,t)}return tt(this,t,e,r)}function tt(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);X.TYPED_ARRAY_SUPPORT?(t=e).__proto__=X.prototype:t=nt(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!X.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|at(e,r);t=H(t,n);var i=t.write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(ot(e)){var r=0|it(e.length);return 0===(t=H(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?H(t,0):nt(t,e);if("Buffer"===e.type&&Z(e.data))return nt(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function et(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function rt(t,e){if(et(e),t=H(t,e<0?0:0|it(e)),!X.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function nt(t,e){var r=e.length<0?0:0|it(e.length);t=H(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function it(t){if(t>=$())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$().toString(16)+" bytes");return 0|t}function ot(t){return!(null==t||!t._isBuffer)}function at(t,e){if(ot(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Ot(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Ut(t).length;default:if(n)return Ot(t).length;e=(""+e).toLowerCase(),n=!0}}function st(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Et(this,e,r);case"utf8":case"utf-8":return _t(this,e,r);case"ascii":return wt(this,e,r);case"latin1":case"binary":return bt(this,e,r);case"base64":return vt(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return At(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function ut(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function ht(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=X.from(e,n)),ot(e))return 0===e.length?-1:ft(t,e,r,n,i);if("number"==typeof e)return e&=255,X.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):ft(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function ft(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var f=-1;for(o=r;o<s;o++)if(h(t,o)===h(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*a}else-1!==f&&(o-=o-f),f=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var l=!0,c=0;c<u;c++)if(h(t,o+c)!==h(e,c)){l=!1;break}if(l)return o}return-1}function lt(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function ct(t,e,r,n){return Lt(Ot(e,t.length-r),t,r,n)}function pt(t,e,r,n){return Lt(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function dt(t,e,r,n){return pt(t,e,r,n)}function gt(t,e,r,n){return Lt(Ut(e),t,r,n)}function yt(t,e,r,n){return Lt(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function vt(t,e,r){return 0===e&&r===t.length?z(t):z(t.slice(e,r))}function _t(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,h=t[i],f=null,l=h>239?4:h>223?3:h>191?2:1;if(i+l<=r)switch(l){case 1:h<128&&(f=h);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&h)<<6|63&o)>127&&(f=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&h)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&h)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=l}return function(t){var e=t.length;if(e<=mt)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=mt));return r}(n)}X.TYPED_ARRAY_SUPPORT=void 0===N.TYPED_ARRAY_SUPPORT||N.TYPED_ARRAY_SUPPORT,$(),X.poolSize=8192,X._augment=function(t){return t.__proto__=X.prototype,t},X.from=function(t,e,r){return tt(null,t,e,r)},X.TYPED_ARRAY_SUPPORT&&(X.prototype.__proto__=Uint8Array.prototype,X.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&X[Symbol.species]),X.alloc=function(t,e,r){return function(t,e,r,n){return et(e),e<=0?H(t,e):void 0!==r?"string"==typeof n?H(t,e).fill(r,n):H(t,e).fill(r):H(t,e)}(null,t,e,r)},X.allocUnsafe=function(t){return rt(null,t)},X.allocUnsafeSlow=function(t){return rt(null,t)},X.isBuffer=function(t){return null!=t&&(!!t._isBuffer||Ft(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Ft(t.slice(0,0))}(t))},X.compare=function(t,e){if(!ot(t)||!ot(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},X.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},X.concat=function(t,e){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return X.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=X.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!ot(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},X.byteLength=at,X.prototype._isBuffer=!0,X.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)ut(this,e,e+1);return this},X.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)ut(this,e,e+3),ut(this,e+1,e+2);return this},X.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)ut(this,e,e+7),ut(this,e+1,e+6),ut(this,e+2,e+5),ut(this,e+3,e+4);return this},X.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?_t(this,0,t):st.apply(this,arguments)},X.prototype.equals=function(t){if(!ot(t))throw new TypeError("Argument must be a Buffer");return this===t||0===X.compare(this,t)},X.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},X.prototype.compare=function(t,e,r,n,i){if(!ot(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(n,i),h=t.slice(e,r),f=0;f<s;++f)if(u[f]!==h[f]){o=u[f],a=h[f];break}return o<a?-1:a<o?1:0},X.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},X.prototype.indexOf=function(t,e,r){return ht(this,t,e,r,!0)},X.prototype.lastIndexOf=function(t,e,r){return ht(this,t,e,r,!1)},X.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return lt(this,t,e,r);case"utf8":case"utf-8":return ct(this,t,e,r);case"ascii":return pt(this,t,e,r);case"latin1":case"binary":return dt(this,t,e,r);case"base64":return gt(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yt(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},X.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var mt=4096;function wt(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function bt(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Et(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=xt(t[o]);return i}function At(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function Tt(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function kt(t,e,r,n,i,o){if(!ot(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function Rt(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function St(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function Pt(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function It(t,e,r,n,i){return i||Pt(t,0,r,4),Q(t,e,r,n,23,4),r+4}function Mt(t,e,r,n,i){return i||Pt(t,0,r,8),Q(t,e,r,n,52,8),r+8}X.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),X.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=X.prototype;else{var i=e-t;r=new X(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},X.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||Tt(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},X.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||Tt(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},X.prototype.readUInt8=function(t,e){return e||Tt(t,1,this.length),this[t]},X.prototype.readUInt16LE=function(t,e){return e||Tt(t,2,this.length),this[t]|this[t+1]<<8},X.prototype.readUInt16BE=function(t,e){return e||Tt(t,2,this.length),this[t]<<8|this[t+1]},X.prototype.readUInt32LE=function(t,e){return e||Tt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},X.prototype.readUInt32BE=function(t,e){return e||Tt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},X.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||Tt(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},X.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||Tt(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},X.prototype.readInt8=function(t,e){return e||Tt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},X.prototype.readInt16LE=function(t,e){e||Tt(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},X.prototype.readInt16BE=function(t,e){e||Tt(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},X.prototype.readInt32LE=function(t,e){return e||Tt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},X.prototype.readInt32BE=function(t,e){return e||Tt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},X.prototype.readFloatLE=function(t,e){return e||Tt(t,4,this.length),G(this,t,!0,23,4)},X.prototype.readFloatBE=function(t,e){return e||Tt(t,4,this.length),G(this,t,!1,23,4)},X.prototype.readDoubleLE=function(t,e){return e||Tt(t,8,this.length),G(this,t,!0,52,8)},X.prototype.readDoubleBE=function(t,e){return e||Tt(t,8,this.length),G(this,t,!1,52,8)},X.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||kt(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},X.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||kt(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},X.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,1,255,0),X.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},X.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,2,65535,0),X.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Rt(this,t,e,!0),e+2},X.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,2,65535,0),X.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Rt(this,t,e,!1),e+2},X.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,4,4294967295,0),X.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):St(this,t,e,!0),e+4},X.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,4,4294967295,0),X.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):St(this,t,e,!1),e+4},X.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);kt(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},X.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);kt(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},X.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,1,127,-128),X.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},X.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,2,32767,-32768),X.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Rt(this,t,e,!0),e+2},X.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,2,32767,-32768),X.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Rt(this,t,e,!1),e+2},X.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,4,2147483647,-2147483648),X.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):St(this,t,e,!0),e+4},X.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||kt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),X.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):St(this,t,e,!1),e+4},X.prototype.writeFloatLE=function(t,e,r){return It(this,t,e,!0,r)},X.prototype.writeFloatBE=function(t,e,r){return It(this,t,e,!1,r)},X.prototype.writeDoubleLE=function(t,e,r){return Mt(this,t,e,!0,r)},X.prototype.writeDoubleBE=function(t,e,r){return Mt(this,t,e,!1,r)},X.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!X.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},X.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!X.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=ot(t)?t:Ot(new X(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var Ct=/[^+\/0-9A-Za-z-_]/g;function xt(t){return t<16?"0"+t.toString(16):t.toString(16)}function Ot(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Ut(t){return function(t){var e,r,n,i,o,a;K||W();var s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[s-2]?2:"="===t[s-1]?1:0,a=new V(3*s/4-o),n=o>0?s-4:s;var u=0;for(e=0,r=0;e<n;e+=4,r+=3)i=q[t.charCodeAt(e)]<<18|q[t.charCodeAt(e+1)]<<12|q[t.charCodeAt(e+2)]<<6|q[t.charCodeAt(e+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=q[t.charCodeAt(e)]<<2|q[t.charCodeAt(e+1)]>>4,a[u++]=255&i):1===o&&(i=q[t.charCodeAt(e)]<<10|q[t.charCodeAt(e+1)]<<4|q[t.charCodeAt(e+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Ct,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Lt(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Ft(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Bt=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},Yt=new function(){this.browser=new Bt,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(Yt.wxa=!0,Yt.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?Yt.worker=!0:"undefined"==typeof navigator||0===navigator.userAgent.indexOf("Node.js")?(Yt.node=!0,Yt.svgSupported=!0):function(t,e){var r=e.browser,n=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(t);n&&(r.firefox=!0,r.version=n[1]);i&&(r.ie=!0,r.version=i[1]);o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18);a&&(r.weChat=!0);e.svgSupported="undefined"!=typeof SVGRect,e.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,e.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),e.domSupported="undefined"!=typeof document;var s=document.documentElement.style;e.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||r.ie&&+r.version>=9}(navigator.userAgent,Yt),Yt.hasGlobalWindow&&f(window.btoa);var Nt=Array.prototype.slice;function Dt(t,e,r){return(e-t)*r+t}function qt(t,e,r,n){for(var i=e.length,o=0;o<i;o++)t[o]=Dt(e[o],r[o],n);return t}function Vt(t,e,r,n){for(var i=e.length,o=0;o<i;o++)t[o]=e[o]+r[o]*n;return t}function Kt(t,e,r,n){for(var i=e.length,o=i&&e[0].length,a=0;a<i;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=e[a][s]+r[a][s]*n}return t}function Wt(t,e){for(var r=t.length,n=e.length,i=r>n?e:t,o=Math.min(r,n),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(r,n);s++)i.push({offset:a.offset,color:a.color.slice()})}function jt(t,e,r){var n=t,i=e;if(n.push&&i.push){var o=n.length,a=i.length;if(o!==a)if(o>a)n.length=a;else for(var s=o;s<a;s++)n.push(1===r?i[s]:Nt.call(i[s]));var u=n[0]&&n[0].length;for(s=0;s<n.length;s++)if(1===r)isNaN(n[s])&&(n[s]=i[s]);else for(var h=0;h<u;h++)isNaN(n[s][h])&&(n[s][h]=i[s][h])}}function zt(t){if(a(t)){var e=t.length;if(a(t[0])){for(var r=[],n=0;n<e;n++)r.push(Nt.call(t[n]));return r}return Nt.call(t)}return t}function Gt(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=null==t[3]?1:t[3],"rgba("+t.join(",")+")"}function Qt(t){return 4===t||5===t}function Jt(t){return 1===t||2===t}var Zt=[0,0,0,0],$t=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(e,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,u=!1,h=6,c=r;if(a(r)){var p=function(t){return a(t&&t[0])?2:1}(r);h=p,(1===p&&!l(r[0])||2===p&&!l(r[0][0]))&&(u=!0)}else if(l(r)&&!function(t){return t!=t}(r))h=0;else if(function(t){return"string"==typeof t}(r))if(isNaN(+r)){var d=B(r);d&&(c=d,h=3)}else h=0;else if(function(t){return null!=t.colorStops}(r)){var g=function(t,e){if(Object.assign)Object.assign(t,e);else for(var r in e)e.hasOwnProperty(r)&&"__proto__"!==r&&(t[r]=e[r]);return t}({},c);g.colorStops=s(r.colorStops,(function(t){return{offset:t.offset,color:B(t.color)}})),"linear"===r.type?h=4:function(t){return"radial"===t.type}(r)&&(h=5),c=g}0===o?this.valType=h:h===this.valType&&6!==h||(u=!0),this.discrete=this.discrete||u;var y={time:e,value:c,rawValue:r,percent:0};return n&&(y.easing=n,y.easingFunc=f(n)?n:t[n]||b(n)),i.push(y),y},e.prototype.prepare=function(t,e){var r=this.keyframes;this._needsSort&&r.sort((function(t,e){return t.time-e.time}));for(var n=this.valType,i=r.length,o=r[i-1],a=this.discrete,s=Jt(n),u=Qt(n),h=0;h<i;h++){var f=r[h],l=f.value,c=o.value;f.percent=f.time/t,a||(s&&h!==i-1?jt(l,c,n):u&&Wt(l.colorStops,c.colorStops))}if(!a&&5!==n&&e&&this.needsAnimate()&&e.needsAnimate()&&n===e.valType&&!e._finished){this._additiveTrack=e;var p=r[0].value;for(h=0;h<i;h++)0===n?r[h].additiveValue=r[h].value-p:3===n?r[h].additiveValue=Vt([],r[h].value,p,-1):Jt(n)&&(r[h].additiveValue=1===n?Vt([],r[h].value,p,-1):Kt([],r[h].value,p,-1))}},e.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r,n,i,o=null!=this._additiveTrack,a=o?"additiveValue":"value",u=this.valType,h=this.keyframes,f=h.length,l=this.propName,c=3===u,p=this._lastFr,d=Math.min;if(1===f)n=i=h[0];else{if(e<0)r=0;else if(e<this._lastFrP){for(r=d(p+1,f-1);r>=0&&!(h[r].percent<=e);r--);r=d(r,f-2)}else{for(r=p;r<f&&!(h[r].percent>e);r++);r=d(r-1,f-2)}i=h[r+1],n=h[r]}if(n&&i){this._lastFr=r,this._lastFrP=e;var g=i.percent-n.percent,y=0===g?1:d((e-n.percent)/g,1);i.easingFunc&&(y=i.easingFunc(y));var v=o?this._additiveValue:c?Zt:t[l];if(!Jt(u)&&!c||v||(v=this._additiveValue=[]),this.discrete)t[l]=y<1?n.rawValue:i.rawValue;else if(Jt(u))1===u?qt(v,n[a],i[a],y):function(t,e,r,n){for(var i=e.length,o=i&&e[0].length,a=0;a<i;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=Dt(e[a][s],r[a][s],n)}}(v,n[a],i[a],y);else if(Qt(u)){var _=n[a],m=i[a],w=4===u;t[l]={type:w?"linear":"radial",x:Dt(_.x,m.x,y),y:Dt(_.y,m.y,y),colorStops:s(_.colorStops,(function(t,e){var r=m.colorStops[e];return{offset:Dt(t.offset,r.offset,y),color:Gt(qt([],t.color,r.color,y))}})),global:m.global},w?(t[l].x2=Dt(_.x2,m.x2,y),t[l].y2=Dt(_.y2,m.y2,y)):t[l].r=Dt(_.r,m.r,y)}else if(c)qt(v,n[a],i[a],y),o||(t[l]=Gt(v));else{var b=Dt(n[a],i[a],y);o?this._additiveValue=b:t[l]=b}o&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var e=this.valType,r=this.propName,n=this._additiveValue;0===e?t[r]=t[r]+n:3===e?(B(t[r],Zt),Vt(Zt,Zt,n,1),t[r]=Gt(Zt)):1===e?Vt(t[r],t[r],n,1):2===e&&Kt(t[r],t[r],n,1)},e}(),Ht=function(){function t(t,e,r,n){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&n?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"undefined"!=typeof console&&console.error.apply(console,t)}("Can' use additive animation on looped animation."):(this._additiveAnimators=n,this._allowDiscrete=r)}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(t){this._target=t},t.prototype.when=function(t,e,r){return this.whenWithKeys(t,e,h(e),r)},t.prototype.whenWithKeys=function(t,e,r,n){for(var i=this._tracks,o=0;o<r.length;o++){var a=r[o],s=i[a];if(!s){s=i[a]=new $t(a);var u=void 0,h=this._getAdditiveTrack(a);if(h){var f=h.keyframes,l=f[f.length-1];u=l&&l.value,3===h.valType&&u&&(u=Gt(u))}else u=this._target[a];if(null==u)continue;t>0&&s.addKeyframe(0,zt(u),n),this._trackKeys.push(a)}s.addKeyframe(t,zt(e[a]),n)}return this._maxTime=Math.max(this._maxTime,t),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,r=0;r<e;r++)t[r].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var r=0;r<e.length;r++)e[r].call(this)},t.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,r=0;r<e.length;r++)t[e[r]].setFinished()},t.prototype._getAdditiveTrack=function(t){var e,r=this._additiveAnimators;if(r)for(var n=0;n<r.length;n++){var i=r[n].getTrack(t);i&&(e=i)}return e},t.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,r=[],n=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var o=this._trackKeys[i],a=this._tracks[o],s=this._getAdditiveTrack(o),u=a.keyframes,h=u.length;if(a.prepare(n,s),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var f=u[h-1];f&&(e._target[a.propName]=f.rawValue),a.setFinished()}else r.push(a)}if(r.length||this._force){var l=new E({life:n,loop:this._loop,delay:this._delay||0,onframe:function(t){e._started=2;var n=e._additiveAnimators;if(n){for(var i=!1,o=0;o<n.length;o++)if(n[o]._clip){i=!0;break}i||(e._additiveAnimators=null)}for(o=0;o<r.length;o++)r[o].step(e._target,t);var a=e._onframeCbs;if(a)for(o=0;o<a.length;o++)a[o](e._target,t)},ondestroy:function(){e._doneCallback()}});this._clip=l,this.animation&&this.animation.addClip(l),t&&l.setEasing(t)}else this._doneCallback();return this}},t.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},t.prototype.delay=function(t){return this._delay=t,this},t.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},t.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},t.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(t){return this._tracks[t]},t.prototype.getTracks=function(){var t=this;return s(this._trackKeys,(function(e){return t._tracks[e]}))},t.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var r=this._tracks,n=this._trackKeys,i=0;i<t.length;i++){var o=r[t[i]];o&&!o.isFinished()&&(e?o.step(this._target,1):1===this._started&&o.step(this._target,0),o.setFinished())}var a=!0;for(i=0;i<n.length;i++)if(!r[n[i]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},t.prototype.saveTo=function(t,e,r){if(t){e=e||this._trackKeys;for(var n=0;n<e.length;n++){var i=e[n],o=this._tracks[i];if(o&&!o.isFinished()){var a=o.keyframes,s=a[r?0:a.length-1];s&&(t[i]=zt(s.rawValue))}}}},t.prototype.__changeFinalValue=function(t,e){e=e||h(t);for(var r=0;r<e.length;r++){var n=e[r],i=this._tracks[n];if(i){var o=i.keyframes;if(o.length>1){var a=o.pop();i.addKeyframe(a.time,t[n]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},t}();export{zt as cloneValue,Ht as default};
